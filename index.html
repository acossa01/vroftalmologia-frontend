<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü•Ω Sistema VR de Oftalmologia - Educa√ß√£o M√©dica Imersiva</title>
    <link rel="stylesheet" href="style.css">
    <script>
        window.BACKEND_GRAPHQL_ENDPOINT = 'https://rv-backend-api.onrender.com/graphql';
    </script>
    <script src="graphql-client.js"></script>
    <style>
        /* Fallback para √≠cones Font Awesome */
        .fas, .fab { font-family: Arial, sans-serif; }
        .fas::before, .fab::before { content: '‚óè'; }
        .fa-eye::before { content: 'üëÅÔ∏è'; }
        .fa-vr-cardboard::before { content: 'ü•Ω'; }
        .fa-play::before { content: '‚ñ∂Ô∏è'; }
        .fa-code::before { content: 'üíª'; }
    </style>
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                 <a href="index.html"> <img src="https://www.dropbox.com/scl/fi/zu0l7kq2k3t8h0ty5logo/logo_vr_transparente.png.png?rlkey=efim5buo8kqyoy0apzfr31hc3&raw=1" alt="Logo VR Oftalmologia">
                  </a>
                    </div>
                <ul class="nav-menu">
                    <li><a href="#home" class="nav-link">In√≠cio</a></li>
                    <li><a href="#users" class="nav-link">Usu√°rios</a></li>
                    <li><a href="#contact" class="nav-link">Contato</a></li>
                    <li class="nav-auth-links"><a href="login.html" class="nav-link nav-login">Login</a></li>
                    <li class="nav-auth-links"><a href="register.html" class="nav-link nav-cadastro">Cadastro</a></li>
                    <li class="nav-user-info" style="display: none;">
                        <span class="nav-user-name"></span>
                        <a href="#" class="nav-link nav-logout" onclick="handleLogout()">Sair</a>
                    </li>
                </ul>
                <div class="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <section id="home" class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">Plataforma de Oftalmologia com Realidade Virtual</h1>
                <p class="hero-description">
                    Plataforma completa de realidade virtual para educa√ß√£o m√©dica, oferecendo 
                    experi√™ncias imersivas personalizadas para usu√°rios, estudantes e m√©dicos.
                </p>
            </div>
        </div>
    </section>

    <section id="recursos" class="users">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Recursos Principais</h2>
                <p class="section-description">
                    Funcionalidades chave da nossa plataforma de realidade virtual.
                </p>
            </div>
            <div class="users-grid">
                <div class="user-card">
                    <div class="user-icon"><i class="fas fa-vr-cardboard"></i></div>
                    <h3>Simula√ß√µes Realistas</h3>
                    <p class="user-description">Treine procedimentos em um ambiente virtual seguro e altamente detalhado, com feedback t√°til e visual preciso.</p>
                </div>
                <div class="user-card">
                    <div class="user-icon"><i class="fas fa-book-medical"></i></div>
                    <h3>Conte√∫do Personalizado</h3>
                    <p class="user-description">Acesse m√≥dulos de aprendizado e casos cl√≠nicos que se adaptam ao seu n√≠vel de conhecimento e especialidade.</p>
                </div>
                <div class="user-card">
                    <div class="user-icon"><i class="fas fa-users"></i></div>
                    <h3>Colabora√ß√£o em Tempo Real</h3>
                    <p class="user-description">Participe de sess√µes cir√∫rgicas virtuais e discuss√µes de casos com especialistas de todo o mundo, como se estivessem na mesma sala.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="users" class="users">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Nossos Planos</h2>
                <p class="section-description">
                    Tr√™s perfis distintos com n√≠veis de acesso personalizados para cada necessidade.
                </p>
            </div>
            <div class="users-grid">
                <div class="user-card">
                    <div class="featured-badge">
                        <i class="fas fa-star"></i>
                        COMUM
                    </div>
                    <div class="user-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3>üë§ Usu√°rio Comum</h3>
                    <p class="user-description">
                        Perfil b√°sico para pessoas interessadas em aprender sobre oftalmologia
                    </p>
                    <div class="user-features">
                        <h4>Funcionalidades:</h4>
                        <ul>
                            <li>‚úÖ Perfil com hist√≥rico m√©dico b√°sico</li>
                            <li>‚úÖ Acesso a conte√∫do <span class="badge badge-green">GERAL</span></li>
                            <li>‚úÖ Agendamento de consultas virtuais</li>
                            <li>‚úÖ Acesso √† <strong>Sala Comum</strong> VR</li>
                            <li>‚úÖ Material educativo sobre condi√ß√µes oftalmol√≥gicas</li>
                        </ul>
                    </div>
                </div>
                <div class="user-card featured">
                    <div class="featured-badge">
                        <i class="fas fa-star"></i>
                        ACAD√äMICO
                    </div>
                    <div class="user-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>üéì Estudante</h3>
                    <p class="user-description">
                        Perfil acad√™mico completo para estudantes de medicina com foco em oftalmologia
                    </p>
                    <div class="user-features">
                        <h4>Funcionalidades:</h4>
                        <ul>
                            <li>‚úÖ Perfil acad√™mico com matr√≠cula e institui√ß√£o</li>
                            <li>‚úÖ Acesso a conte√∫do <span class="badge badge-green">GERAL</span> e <span class="badge badge-blue">CL√çNICO</span></li>
                            <li>‚úÖ Orienta√ß√£o por m√©dicos qualificados</li>
                            <li>‚úÖ Acesso a <strong>Salas Comum e T√©cnica</strong> VR</li>
                            <li>‚úÖ Casos cl√≠nicos para estudo aprofundado</li>
                        </ul>
                    </div>
                </div>
                <div class="user-card premium">
                    <div class="featured-badge premium-badge">
                        <i class="fas fa-crown"></i>
                        PROFISSIONAL
                    </div>
                    <div class="user-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <h3>üë®‚Äç‚öïÔ∏è M√©dico</h3>
                    <p class="user-description">
                        Acesso completo para profissionais m√©dicos com especializa√ß√£o em oftalmologia
                    </p>
                    <div class="user-features">
                        <h4>Funcionalidades:</h4>
                        <ul>
                            <li>‚úÖ Perfil profissional com CRM e especialidades</li>
                            <li>‚úÖ Acesso completo a todos os tipos de conte√∫do</li>
                            <li>‚úÖ Cria√ß√£o e gerenciamento de conte√∫do educacional</li>
                            <li>‚úÖ Orienta√ß√£o e acompanhamento de estudantes</li>
                            <li>‚úÖ Acesso a <strong>todas as salas VR</strong></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="vr-rooms" class="vr-rooms">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Salas de Realidade Virtual</h2>
                <p class="section-description">
                    Ambientes imersivos especializados para diferentes n√≠veis de aprendizado
                </p>
            </div>
            <div class="rooms-container">
                <div class="room-card">
                    <div class="room-header">
                        <div class="room-icon">üè†</div>
                        <h3>Sala Comum</h3>
                        <span class="room-access">Todos os Usu√°rios</span>
                    </div>
                    <div class="room-features">
                        <p><strong>Caracter√≠sticas:</strong> Interface simples e amig√°vel</p>
                        <ul>
                            <li>Comunica√ß√£o b√°sica entre usu√°rios</li>
                            <li>Conte√∫do educativo introdut√≥rio</li>
                            <li>Navega√ß√£o intuitiva</li>
                            <li>Ambiente acolhedor para iniciantes</li>
                        </ul>
                        <div class="room-users">
                            <span class="user-type comum">üë§ Usu√°rio Comum</span>
                            <span class="user-type estudante">üéì Estudante</span>
                            <span class="user-type medico">üë®‚Äç‚öïÔ∏è M√©dico</span>
                        </div>
                    </div>
                </div>
                <div class="room-card featured">
                    <div class="room-header">
                        <div class="room-icon">üéì</div>
                        <h3>Sala T√©cnica</h3>
                        <span class="room-access">Estudantes + M√©dicos</span>
                    </div>
                    <div class="room-features">
                        <p><strong>Caracter√≠sticas:</strong> Ambiente educacional avan√ßado</p>
                        <ul>
                            <li>Discuss√µes t√©cnicas especializadas</li>
                            <li>Simula√ß√µes de casos cl√≠nicos</li>
                            <li>Intera√ß√£o Professor ‚Üí Estudantes</li>
                            <li>Funciona de forma independente</li>
                            <li>Instru√ß√£o individual dispon√≠vel</li>
                        </ul>
                        <div class="room-users">
                            <span class="user-type estudante">üéì Estudante</span>
                            <span class="user-type medico">üë®‚Äç‚öïÔ∏è M√©dico</span>
                        </div>
                    </div>
                </div>
                <div class="room-card premium">
                    <div class="room-header">
                        <div class="room-icon">‚öïÔ∏è</div>
                        <h3>Sala de Cirurgia</h3>
                        <span class="room-access">Apenas M√©dicos</span>
                    </div>
                    <div class="room-features">
                        <p><strong>Caracter√≠sticas:</strong> Ambiente cir√∫rgico especializado</p>
                        <ul>
                            <li>Colabora√ß√£o m√©dica em procedimentos</li>
                            <li>Simula√ß√µes cir√∫rgicas avan√ßadas</li>
                            <li>Instrumentos virtuais especializados</li>
                            <li>Casos complexos de oftalmologia</li>
                            <li>Funciona de forma independente</li>
                        </ul>
                        <div class="room-users">
                            <span class="user-type medico">üë®‚Äç‚öïÔ∏è M√©dico</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="room-matrix">
                <h3>Matriz de Acesso √†s Salas</h3>
                <table class="access-table">
                    <thead>
                        <tr>
                            <th>Tipo de Usu√°rio</th>
                            <th>üè† Sala Comum</th>
                            <th>üéì Sala T√©cnica</th>
                            <th>‚öïÔ∏è Sala Cirurgia</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="user-type comum">üë§ Usu√°rio Comum</span></td>
                            <td><span class="access allowed">‚úÖ</span></td>
                            <td><span class="access denied">‚ùå</span></td>
                            <td><span class="access denied">‚ùå</span></td>
                        </tr>
                        <tr>
                            <td><span class="user-type estudante">üéì Estudante</span></td>
                            <td><span class="access allowed">‚úÖ</span></td>
                            <td><span class="access allowed">‚úÖ</span></td>
                            <td><span class="access denied">‚ùå</span></td>
                        </tr>
                        <tr>
                            <td><span class="user-type medico">üë®‚Äç‚öïÔ∏è M√©dico</span></td>
                            <td><span class="access allowed">‚úÖ</span></td>
                            <td><span class="access allowed">‚úÖ</span></td>
                            <td><span class="access allowed">‚úÖ</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>
   
    <!-- Statistics Section -->
    <section class="statistics">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>3</h3>
                    <p>Tipos de Usu√°rios</p>
                    <small>Comum, Estudante, M√©dico</small>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-book-medical"></i>
                    </div>
                    <h3>3</h3>
                    <p>N√≠veis de Conte√∫do</p>
                    <small>Geral, Cl√≠nico, Cir√∫rgico</small>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-vr-cardboard"></i>
                    </div>
                    <h3>3</h3>
                    <p>Salas VR</p>
                    <small>Comum, T√©cnica, Cirurgia</small>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>100%</h3>
                    <p>Controle de Acesso</p>
                    <small>Seguran√ßa garantida</small>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Entre em Contato</h2>
                <p class="section-description">
                    Interessado em implementar a plataforma? Fale conosco!
                </p>
            </div>
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h4>Email</h4>
                            <p>oftalmvr@gmail.com</p>
                        </div>
                    </div>
                </div>
                <div class="contact-form">
                    <form>
                        <div class="form-group">
                            <label for="name">Nome Completo</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Mensagem</label>
                            <textarea id="message" name="message" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            Enviar Mensagem
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-eye"></i>
                        <span>VR Oftalmologia</span>
                    </div>
                    <p>Revolucionando o ensino de oftalmologia atrav√©s da realidade virtual</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Plataforma</h4>
                    <ul>
                        <li><a href="#features">Recursos</a></li>
                        <li><a href="#users">Tipos de Usu√°rios</a></li>
                        <li><a href="#vr-rooms">Salas VR</a></li>
                        <li><a href="#technology">Tecnologia</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Solu√ß√µes</h4>
                    <ul>
                        <li><a href="#vr-rooms">Treinamento VR</a></li>
                        <li><a href="#features">Simula√ß√µes M√©dicas</a></li>
                        <li><a href="#users">Educa√ß√£o Continuada</a></li>
                        <li><a href="#technology">Consultoria Especializada</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Empresa</h4>
                    <ul>
                        <li><a href="#contact">Contato</a></li>
                        <li><a href="#about">Sobre N√≥s</a></li>
                        <li><a href="#privacy">Pol√≠tica de Privacidade</a></li>
                        <li><a href="#terms">Termos de Uso</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Sistema VR de Oftalmologia. Desenvolvido para revolucionar a educa√ß√£o m√©dica.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // ... (seu script javascript) ...
    </script>
    <script src="https://kit.fontawesome.com/9e9c4f83e2.js" crossorigin="anonymous"></script>
    <script>
        // ============================================================================
        // INTEGRA√á√ÉO COM AUTENTICA√á√ÉO
        // ============================================================================
        
        // Fun√ß√£o para fazer logout
        async function handleLogout() {
            try {
                await window.graphqlClient.logout();
                showAPINotification('Logout realizado com sucesso!', 'success');
                setTimeout(() => {
                    location.reload();
                }, 1000);
            } catch (error) {
                console.error('Erro no logout:', error);
                showAPINotification('Erro no logout', 'error');
            }
        }
        
        // Fun√ß√£o para atualizar interface baseada no status de autentica√ß√£o
        function updateAuthInterface() {
            const isAuthenticated = window.graphqlClient && window.graphqlClient.isAuthenticated();
            const userData = window.graphqlClient ? window.graphqlClient.getUserData() : null;
            
            // Elementos da interface
            const authLinks = document.querySelectorAll('.nav-auth-links');
            const userInfo = document.querySelector('.nav-user-info');
            const userName = document.querySelector('.nav-user-name');
            
            if (isAuthenticated && userData) {
                // Usu√°rio logado - mostrar info do usu√°rio e bot√£o sair
                authLinks.forEach(link => link.style.display = 'none');
                if (userInfo) {
                    userInfo.style.display = 'flex';
                    userInfo.style.alignItems = 'center';
                    userInfo.style.gap = '12px';
                }
                if (userName) {
                    userName.textContent = `üëã ${userData.nomeCompleto}`;
                    userName.style.color = 'var(--primary-green)';
                    userName.style.fontWeight = '600';
                    userName.style.fontSize = '14px';
                }
                
                // Mostrar notifica√ß√£o de boas-vindas
                if (sessionStorage.getItem('show_welcome') !== 'false') {
                    const userTypeEmojis = {
                        'USUARIO_COMUM': 'üë§',
                        'ESTUDANTE': 'üéì', 
                        'MEDICO': 'üë®‚Äç‚öïÔ∏è'
                    };
                    const emoji = userTypeEmojis[userData.tipoUsuario] || 'üë§';
                    showAPINotification(
                        `${emoji} Bem-vindo(a), ${userData.nomeCompleto}! Voc√™ est√° logado como ${userData.tipoUsuario.toLowerCase().replace('_', ' ')}.`, 
                        'success'
                    );
                    sessionStorage.setItem('show_welcome', 'false');
                }
                
            } else {
                // Usu√°rio n√£o logado - mostrar links de login/cadastro
                authLinks.forEach(link => link.style.display = 'list-item');
                if (userInfo) {
                    userInfo.style.display = 'none';
                }
            }
        }
        
        // Fun√ß√£o para verificar autentica√ß√£o periodicamente
        async function checkAuthStatus() {
            if (window.graphqlClient && window.graphqlClient.isAuthenticated()) {
                try {
                    const isValid = await window.graphqlClient.verificarToken();
                    if (!isValid) {
                        // Token inv√°lido, fazer logout
                        await window.graphqlClient.logout();
                        showAPINotification('Sua sess√£o expirou. Fa√ßa login novamente.', 'warning');
                        setTimeout(() => {
                            location.reload();
                        }, 2000);
                    }
                } catch (error) {
                    console.error('Erro ao verificar token:', error);
                }
            }
        }
        
        // Inicializar interface de autentica√ß√£o quando p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Aguardar carregamento do GraphQL client
            setTimeout(() => {
                updateAuthInterface();
                
                // Verificar status de autentica√ß√£o a cada 5 minutos
                setInterval(checkAuthStatus, 5 * 60 * 1000);
            }, 100);
        });
        
        // Atualizar interface quando localStorage mudar (para sincronizar entre abas)
        window.addEventListener('storage', function(e) {
            if (e.key === 'access_token' || e.key === 'user_data') {
                updateAuthInterface();
            }
        });
        
        console.log('üîê Sistema de autentica√ß√£o inicializado!');
    </script>
</body>
</html>